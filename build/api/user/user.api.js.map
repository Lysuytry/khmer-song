{"version":3,"sources":["../../../src/api/user/user.api.js"],"names":["getListUser","req","res","limit","offset","status","name","type","query","filterName","Op","like","filterType","conditions","role","rows","count","User","findAndCountAll","success","total","error","fail"],"mappings":";;;;;;;;;AAAA;;;;AACA;;;;AAEO,MAAMA,oCAAc,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC7C,MAAG;AACD;AACA,UAAM,EAACC,KAAD,EAAQC,MAAR,EAAgBC,MAAhB,EAAwBC,IAAxB,EAA8BC,IAA9B,KAAsCN,IAAIO,KAAhD;AACA,UAAMC,aAAaH,OAAO,EAACA,MAAM,EAAE,CAACI,wBAAGC,IAAJ,GAAY,IAAGL,IAAK,GAAtB,EAAP,EAAP,GAA4C,EAA/D;AACA,UAAMM,aAAaL,OAAO,EAACA,IAAD,EAAP,GAAgB,EAAnC;AACA,UAAMM,0BAAiBJ,UAAjB,IAA6BJ,MAA7B,IAAwCO,UAAxC,IAAoDE,MAAM,OAA1D,GAAN;AACA,UAAM,EAACC,IAAD,EAAOC,KAAP,KAAgBC,eAAKC,eAAL,CAAqBL,UAArB,CAAtB;AACAX,QAAIiB,OAAJ,CAAYJ,IAAZ,EAAkB,EAACK,OAAOJ,KAAR,EAAeb,KAAf,EAAsBC,MAAtB,EAAlB;AACD,GARD,CAQE,OAAMiB,KAAN,EAAY;AACZnB,QAAIoB,IAAJ,CAASD,KAAT;AACD;AACF,CAZM","file":"user.api.js","sourcesContent":["import User from '../../models/user';\nimport { Op } from '../../common/sequelize-connection';\n\nexport const getListUser = async (req, res) => {\n  try{\n    //const {id} = req.authUser;\n    const {limit, offset, status, name, type} = req.query;\n    const filterName = name ? {name: { [Op.like]: `%${name}%` }} : {};\n    const filterType = type ? {type} : {};\n    const conditions = {...filterName, status, ...filterType, role: 'guest'};\n    const {rows, count} = User.findAndCountAll(conditions);\n    res.success(rows, {total: count, limit, offset});\n  } catch(error){\n    res.fail(error);\n  }\n};\n"]}
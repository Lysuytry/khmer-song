{"version":3,"sources":["../../../../src/api/admin/category/category.api.js"],"names":["getCategoryList","req","res","limit","offset","status","name","query","fliterName","Op","like","conditions","rows","count","Category","findAndCountAll","where","success","error","fail","message","createCategory","body","category","findOrCreate","defaults","getCategoryById","id","params","findOne","updateCategoryById","statusQuery","createdBy","updatedBy","data","update","deleteCategory","result"],"mappings":"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","file":"category.api.js","sourcesContent":["import Category from '../../../models/category';\nimport {Op} from '../../../common/sequelize-connection';\n\nexport const getCategoryList = async (req, res) => {\n  try{\n    const {limit, offset, status, name} = req.query;\n    const fliterName = name ? {name: { [Op.like]: `%${name}%` } } : {};\n    const conditions = {...fliterName, status};\n    const {rows, count} = await Category.findAndCountAll({where: conditions, limit, offset});\n    res.success(rows, {limit, offset, count});\n  } catch(error){\n    res.fail(error.message);\n  }\n};\n\nexport const createCategory = async (req, res) => {\n  try{\n    const {name} = req.body;\n    const [category] = await Category.findOrCreate({where: {name}, defaults: req.body});\n    res.success(category);\n  } catch(error){\n    res.fail(error.message);\n  }\n};\n\nexport const getCategoryById = async (req, res) => {\n  try{\n    const {id} = req.params;\n    const {status} = req.query;\n    const category = await Category.findOne({where: {id, status}});\n    res.success(category);\n  } catch(error){\n    res.fail(error.message);\n  }\n};\n\nexport const updateCategoryById = async (req, res) => {\n  try{\n    const {id} = req.params;\n    const statusQuery = req.query.status;\n    let {name, status, createdBy, updatedBy} = req.body;\n    name ? {name} : {};\n    createdBy ? {createdBy} : {};\n    updatedBy ? {updatedBy} : {};\n    status ? {status} : {};\n    const data = {...name, ...status, ...createdBy, ...updatedBy};\n    await Category.update(data,{where: {id, status: statusQuery}});\n    res.success('Successfully updated.');\n  } catch(error){\n    res.fail(error.message);\n  }\n};\n\nexport const deleteCategory = async (req, res) => {\n  try{\n    const {id} = req.params;\n    const [result] = await Category.update({status: 'inactive'}, {where: {id, status: 'active'}});\n    result === 0 ? res.success('Id is not found.') : res.success('Successfully deleted');\n  } catch(error){\n    res.fail(error.message);\n  }\n};\n"]}
{"version":3,"sources":["../../../src/api/artist/artist.api.js"],"names":["getArtistList","req","res","limit","offset","status","name","query","filterName","Op","like","conditions","rows","count","Artist","findAndCountAll","where","success","error","fail","message"],"mappings":";;;;;;;;;AAAA;;;;AACA;;;;AAEO,MAAMA,wCAAgB,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/C,MAAG;AACD,UAAM,EAACC,KAAD,EAAQC,MAAR,EAAgBC,MAAhB,EAAwBC,IAAxB,KAAgCL,IAAIM,KAA1C;AACA,UAAMC,aAAaF,OAAO,EAACA,MAAM,EAAC,CAACG,wBAAGC,IAAJ,GAAa,IAAGJ,IAAK,GAAtB,EAAP,EAAP,GAA4C,EAA/D;AACA,UAAMK,0BAAiBH,UAAjB,IAA6BH,MAA7B,GAAN;AACA,UAAM,EAACO,IAAD,EAAOC,KAAP,KAAgB,MAAMC,iBAAOC,eAAP,CAAuB,EAACC,OAAOL,UAAR,EAAoBR,KAApB,EAA2BC,MAA3B,EAAvB,CAA5B;AACAF,QAAIe,OAAJ,CAAYL,IAAZ,EAAkB,EAACT,KAAD,EAAQC,MAAR,EAAgBS,KAAhB,EAAlB;AACD,GAND,CAME,OAAMK,KAAN,EAAY;AACZhB,QAAIiB,IAAJ,CAASD,MAAME,OAAf;AACD;AACF,CAVM","file":"artist.api.js","sourcesContent":["import Artist from '../../models/artist';\nimport {Op} from '../../common/sequelize-connection';\n\nexport const getArtistList = async (req, res) => {\n  try{\n    const {limit, offset, status, name} = req.query;\n    const filterName = name ? {name: {[Op.like] : `%${name}%`} } : {};\n    const conditions = {...filterName, status};\n    const {rows, count} = await Artist.findAndCountAll({where: conditions, limit, offset});\n    res.success(rows, {limit, offset, count});\n  } catch(error){\n    res.fail(error.message);\n  }\n};\n"]}
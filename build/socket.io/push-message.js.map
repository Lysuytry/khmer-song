{"version":3,"sources":["../../src/socket.io/push-message.js"],"names":["pushMessage","data","id","from","to","messages","token","registerToken","map","item","registrationToken","console","log","s","title","body","error"],"mappings":";;;;;;;AAAA;;AACA;;AAEO,MAAMA,oCAAc,MAAOC,IAAP,IAAgB;AACzC,MAAG;AACD,UAAM,EAACC,EAAD,EAAKC,IAAL,EAAWC,EAAX,EAAeC,QAAf,KAA2BJ,IAAjC;AACA,UAAMK,QAAQ,MAAM,0CAA6B,CAACJ,EAAD,CAA7B,EAAmC,YAAnC,CAApB;AACA,UAAMK,gBAAgBD,MAAME,GAAN,CAAUC,QAAQA,KAAKC,iBAAvB,CAAtB;AACAC,YAAQC,GAAR,CAAYL,aAAZ;AACA,UAAMM,IAAI,MAAM,8CAAuB;AACrCC,aAAQ,sBAAqBX,IAAK,EADG;AAErCY,YAAO,eAAcX,EAAG,EAFa;AAGrCE,aAAOC,aAH8B;AAIrCN,YAAM,EAAEI,QAAF;AAJ+B,KAAvB,EAKd,EALc,CAAhB;AAMAM,YAAQC,GAAR,CAAYC,CAAZ;AACD,GAZD,CAYE,OAAMG,KAAN,EAAY;AACZ,WAAOA,KAAP;AACD;AACF,CAhBM","file":"push-message.js","sourcesContent":["import {getRegistrationTokenByUserId} from '../models/device';\nimport {sendNotificationLegacy} from '../firebase/notification/push-notification';\n\nexport const pushMessage = async (data) => {\n  try{\n    const {id, from, to, messages} = data;\n    const token = await getRegistrationTokenByUserId([id], 'subscribed');\n    const registerToken = token.map(item => item.registrationToken);\n    console.log(registerToken);\n    const s = await sendNotificationLegacy({\n      title: `A New Message from ${from}`,\n      body: `messages to ${to}`,\n      token: registerToken,\n      data: { messages }\n    },{});\n    console.log(s);\n  } catch(error){\n    return error;\n  }\n};\n"]}
{"version":3,"sources":["../../src/common/send-mail.js"],"names":["PASSWORD","EMAIL","process","env","sendEMail","data","auth","user","pass","to","code","transporter","nodemailer","createTransport","service","mailOptions","from","subject","text","html","verify","console","log","sendMail"],"mappings":";;;;;;;AAAA;;;;;;AAEA,MAAM,EAAEA,QAAF,EAAYC,KAAZ,KAAsBC,QAAQC,GAApC;;AAEO,MAAMC,gCAAY,MAAMC,IAAN,IAAc;AACrC,QAAMC,OAAO,EAAEC,MAAMN,KAAR,EAAeO,MAAMR,QAArB,EAAb;AACA,QAAM,EAAES,EAAF,EAAMC,IAAN,KAAeL,IAArB;AACA;AACA,QAAMM,cAAcC,qBAAWC,eAAX,CAA2B;AAC7CC,aAAS,OADoC;AAE7CR;AAF6C,GAA3B,CAApB;;AAKA;AACA,MAAIS,cAAc;AAChBC,UAAO,sCADS,EAC8B;AAC9CP,MAFgB,EAEZ;AACJQ,aAAU,eAHM,EAGU;AAC1BC,UAAO,gCAJS,EAIwB;AACxCC,UAAO,yBAAwBT,IAAK,kBALpB,CAKsC;AALtC,GAAlB;AAOA,QAAMU,SAAS,MAAMT,YAAYS,MAAZ,EAArB;AACAC,UAAQC,GAAR,CAAYF,MAAZ;AACA;AACA,QAAMT,YAAYY,QAAZ,CAAqBR,WAArB,CAAN;AACD,CArBM","file":"send-mail.js","sourcesContent":["import nodemailer from 'nodemailer';\n\nconst { PASSWORD, EMAIL } = process.env;\n\nexport const sendEMail = async data => {\n  const auth = { user: EMAIL, pass: PASSWORD };\n  const { to, code } = data;\n  // create reusable transport method (opens pool of SMTP connections)\n  const transporter = nodemailer.createTransport({\n    service: 'gmail',\n    auth\n  });\n\n  // setup e-mail data with unicode symbols\n  var mailOptions = {\n    from: `Khmer-Song.com <suytry.ly@gmail.com>`, // sender address\n    to, // list of receivers\n    subject: `Register Code`, // Subject line\n    text: `Khmer-Song Registration Verify`, // plaintext body\n    html: `Your register code is ${code} please copy it.` // html body\n  };\n  const verify = await transporter.verify();\n  console.log(verify);\n  // send mail with defined transport object\n  await transporter.sendMail(mailOptions);\n};\n"]}